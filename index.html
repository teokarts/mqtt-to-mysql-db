<!DOCTYPE html>
<html>
  <head>
    <title>Monitoring Page</title>
    <link rel="stylesheet" type="text/css" href="custom.css" />
  </head>

  <body>
    <div id="panels">
      <!-- Pane for Topic 1 -->
      <div class="panel" id="panel1">
        <h2>Topic 1: VivusDigester003/Ecu</h2>
        <div id="info1" class="info-box">
          <!-- Information for Topic 1 -->
        </div>
      </div>

      <!-- Pane for Topic 2 -->
      <div class="panel" id="panel2">
        <h2>Topic 2: Poursalidis/Ecu</h2>
        <div id="info2" class="info-box">
          <!-- Information for Topic 2 -->
        </div>
      </div>
    </div>

    <script>
      function updatePane(paneId, data) {
        const pane = document.getElementById(paneId);
        pane.querySelector('.messages').textContent = data.messageCount;
        pane.querySelector('.dbInserts').textContent = data.dbInsertCount;
        pane.querySelector('.tableName').textContent = data.tableName;
        pane.querySelector('.mqttTopic').textContent = data.topic;
        // Additional details as needed
      }
    </script>

    <script>
      function fetchData() {
        fetch('/data')
          .then((response) => response.json())
          .then((data) => {
            data.stats.forEach((stat) => {
              if (stat.topic === 'VivusDigester003/Ecu') {
                updatePane('info1', stat);
              } else if (stat.topic === 'Poursalidis/Ecu') {
                updatePane('info2', stat);
              }
            });
          })
          .catch((error) => console.error('Fetch error:', error));
      }

      setInterval(fetchData, 5000);
    </script>
  </body>
</html>
